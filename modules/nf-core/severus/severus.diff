Changes in component 'nf-core/severus'
'modules/nf-core/severus/meta.yml' is unchanged
Changes in 'severus/main.nf':
--- modules/nf-core/severus/main.nf
+++ modules/nf-core/severus/main.nf
@@ -4,12 +4,12 @@
 
     conda "${moduleDir}/environment.yml"
     container "${ workflow.containerEngine == 'singularity' && !task.ext.singularity_pull_docker_container ?
-        'https://depot.galaxyproject.org/singularity/severus:1.3--pyhdfd78af_0':
-        'biocontainers/severus:1.3--pyhdfd78af_0' }"
+        'https://depot.galaxyproject.org/singularity/severus:1.6--pyhdfd78af_0':
+        'biocontainers/severus:1.6--pyhdfd78af_0' }"
 
     input:
-    tuple val(meta), path(target_input), path(target_index), path(control_input), path(control_index), path(vcf)
-    tuple val(meta2), path(bed)
+    tuple val(meta), path(target_input), path(target_index), path(control_input), path(control_index), path(vcf), path(tbi)
+    tuple val(meta2), path(bed), path(pon_path)
 
     output:
     tuple val(meta), path("${prefix}/severus.log")                              , emit: log
@@ -19,13 +19,15 @@
     tuple val(meta), path("${prefix}/read_ids.csv")                             , emit: read_ids                         , optional: true
     tuple val(meta), path("${prefix}/severus_collaped_dup.bed")                 , emit: collapsed_dup                    , optional: true
     tuple val(meta), path("${prefix}/severus_LOH.bed")                          , emit: loh                              , optional: true
-    tuple val(meta), path("${prefix}/all_SVs/severus_all.vcf")                  , emit: all_vcf                          , optional: true
-    tuple val(meta), path("${prefix}/all_SVs/breakpoints_clusters_list.tsv")    , emit: all_breakpoints_clusters_list    , optional: true
-    tuple val(meta), path("${prefix}/all_SVs/breakpoints_clusters.tsv")         , emit: all_breakpoints_clusters         , optional: true
+    tuple val(meta), path("${prefix}/all_SVs/severus_all.vcf.gz")               , emit: all_vcf                          , optional: true
+    tuple val(meta), path("${prefix}/all_SVs/severus_all.vcf.gz.tbi")           , emit: all_tbi                          , optional: true
+    tuple val(meta), path("${prefix}/all_SVs/breakpoint_clusters_list.tsv")     , emit: all_breakpoints_clusters_list    , optional: true
+    tuple val(meta), path("${prefix}/all_SVs/breakpoint_clusters.tsv")          , emit: all_breakpoints_clusters         , optional: true
     tuple val(meta), path("${prefix}/all_SVs/plots/severus_*.html")             , emit: all_plots                        , optional: true
-    tuple val(meta), path("${prefix}/somatic_SVs/severus_all.vcf")              , emit: somatic_vcf                      , optional: true
-    tuple val(meta), path("${prefix}/somatic_SVs/breakpoints_clusters_list.tsv"), emit: somatic_breakpoints_clusters_list, optional: true
-    tuple val(meta), path("${prefix}/somatic_SVs/breakpoints_clusters.tsv")     , emit: somatic_breakpoints_clusters     , optional: true
+    tuple val(meta), path("${prefix}/somatic_SVs/severus_somatic.vcf.gz")       , emit: somatic_vcf                      //, optional: true
+    tuple val(meta), path("${prefix}/somatic_SVs/severus_somatic.vcf.gz.tbi")   , emit: somatic_tbi                      , optional: true
+    tuple val(meta), path("${prefix}/somatic_SVs/breakpoint_clusters_list.tsv") , emit: somatic_breakpoints_clusters_list, optional: true
+    tuple val(meta), path("${prefix}/somatic_SVs/breakpoint_clusters.tsv")      , emit: somatic_breakpoints_clusters     , optional: true
     tuple val(meta), path("${prefix}/somatic_SVs/plots/severus_*.html")         , emit: somatic_plots                    , optional: true
     path "versions.yml"                                                         , emit: versions
 
@@ -39,15 +41,23 @@
     def control = control_input ? "--control-bam ${control_input}" : ""
     def vntr_bed = bed ? "--vntr-bed ${bed}" : ""
     def phasing_vcf = vcf ? "--phasing-vcf ${vcf}" : ""
+    def pon = pon_path && (!control_input) ? "--PON ${pon_path}" : ""
     """
     severus \\
         $args \\
         --threads $task.cpus \\
         --target-bam $target_input \\
         $vntr_bed \\
+        $pon \\
         $control \\
         $phasing_vcf \\
         --out-dir ${prefix}
+    
+    bgzip ${prefix}/somatic_SVs/severus_somatic.vcf
+    tabix -p vcf ${prefix}/somatic_SVs/severus_somatic.vcf.gz
+    bgzip ${prefix}/all_SVs/severus_all.vcf
+    tabix -p vcf ${prefix}/all_SVs/severus_all.vcf.gz
+
 
     cat <<-END_VERSIONS > versions.yml
     "${task.process}":
@@ -70,12 +80,14 @@
     touch ${prefix}/read_ids.csv
     touch ${prefix}/read_qual.txt
     touch ${prefix}/breakpoints_double.csv
-    touch ${prefix}/all_SVs/severus_all.vcf
+    touch ${prefix}/all_SVs/severus_all.vcf.gz
+    touch ${prefix}/all_SVs/severus_all.vcf.gz.tbi
     touch ${prefix}/all_SVs/breakpoints_clusters_list.tsv
     touch ${prefix}/all_SVs/breakpoints_clusters.tsv
     touch ${prefix}/all_SVs/plots/severus_0.html
     touch ${prefix}/all_SVs/plots/severus_1.html
-    touch ${prefix}/somatic_SVs/severus_somatic.vcf
+    touch ${prefix}/somatic_SVs/severus_somatic.vcf.gz
+    touch ${prefix}/somatic_SVs/severus_somatic.vcf.gz.tbi
     touch ${prefix}/somatic_SVs/breakpoints_clusters_list.tsv
     touch ${prefix}/somatic_SVs/breakpoints_clusters.tsv
     touch ${prefix}/somatic_SVs/plots/severus_0.html

'modules/nf-core/severus/environment.yml' is unchanged
'modules/nf-core/severus/tests/tags.yml' is unchanged
'modules/nf-core/severus/tests/main.nf.test' is unchanged
'modules/nf-core/severus/tests/main.nf.test.snap' is unchanged
'modules/nf-core/severus/tests/nextflow.config' is unchanged
************************************************************
